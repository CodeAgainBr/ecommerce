<nav id="sidebar">
  <div class="sidebar-header text-center">
    <button id="sidebar" class="btn btn-block text-white">
      <%= link_to root_path, class: "h5 text-white d-inline" do %>
        <span>Ecommerce</span>
      <% end %>
    </button>
  </div>

  <ul class="list-unstyled components">
    <% @categorias = Categoria.all %>
    <% @categorias.each do |categoria| %>
      <li>
        <%= link_to home_categoria_path(categoria), class: "pl-4" do %>
          <h4 class="mb-0"><%= categoria.nome %></h4>
        <% end %>
      </li>

      <% @sub_categorias = SubCategoria.where(categoria_id: categoria) %>
      <% @sub_categorias.each do |sub_categoria| %>
        <li>
          <%= link_to sub_categoria.nome, home_sub_categoria_path(sub_categoria), class: "pl-4" %>
        </li>
      <% end %>
    <% end %>
  </ul>
</nav>

<div id="content">
  <nav class="navbar navbar-expand-lg sticky-top px-0 py-0">
    <ul class="navbar-nav ml-auto list-unstyled components">

      <% if current_user %>

        <li class="nav-item">
          <div class="dropdown">
            <a class="btn btn-secondary btn-icon-plus dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="fa fa-plus"></i>
            </a>
            <div class="dropdown-plus dropdown-menu" aria-labelledby="dropdownMenuButton">
              <%= link_to produtos_path, class: "dropdown-item" do %>
                Cadastro de Produtos
              <% end %>       
              <%= link_to categorias_path, class: "dropdown-item" do %>
                Cadastro de Categorias
              <% end %>                
              <%= link_to sub_categorias_path, class: "dropdown-item" do %>
                Cadastro de Sub-categorias
              <% end %>                  
            </div>
          </div>
        </li>

        <% if current_user.admin %>
          <li class="nav-item">
            <%= link_to rails_admin_path, class: "nav-link" do %>
              <i class="fas fa-key" title="Admin"></i>
            <% end %>
            </a>
          </li>
        <% end %>

        <% if current_user.admin %>
          <li class="nav-item">
            <%= link_to console_path, class: "nav-link" do %>
              <i class="fas fa-terminal" title="Console"></i>
            <% end %>
          </li>
        <% end %>
        
        <li class="nav-item">
          <%= link_to pedidos_path, class: "nav-link" do %>
            <i class="fas fa-shopping-cart" title="Carrinho"></i>
          <% end %>
        </li>

        <li class="nav-item">
          <%= link_to destroy_user_session_path, class: "nav-link", method: :delete do %>
            <i class="fas fa-sign-out-alt" title="Sair"></i>
          <% end %>
        </li>
      <% else %>
        <li class="nav-item">
          <%= link_to new_user_session_path, class: "nav-link" do %>
            <i class="fas fa-sign-in-alt" title="Entrar"></i>
          <% end %>
        </li>
      <% end %>
    </ul>
  </nav>
